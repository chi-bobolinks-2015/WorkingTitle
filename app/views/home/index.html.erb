<div ng-controller="mainController">
  <div class="jumbotron">
    <h1>Welcome to sift</h1>
  </div>

  <div id="about">
    <div class="row">
      <div class="col-md-6"><h3>What is sift?</h3></div>
      <div class="col-md-6"><h3>How does it work?</h3></div>
    </div>
    <div class="row">
      <div class="col-md-6"><p>Sift allows you to access your Github repositories, save snippets of code and store them in a convenient collection. Refer to your saved collections and easily reference important code you saved in the past.</p></div>
      <div class="col-md-6"><p>Login to your Github account by clicking "Login" at the top of the page. Now you can start a collection of code snippets! Name your collection and click submit. Enter your search criteria and hit submit. </p></div>
    </div>
  </div>

<% if current_user %>

<!--   <div id="navbar-left" class="navbar-left">
    <form ng-submit="populateRepositories()">
      <h4>Your Repositories</h4>
      <input class="btn btn-default" type="submit" value="Populate!">
    </form>
    <div ng-controller="mainController">
      <div id="populate-repos">
        <div ng-repeat="repoCollection in repositories">
          <div ng-repeat="repository in repoCollection">
            {{repository}}
          </div>
        </div>
      </div>
    </div>
  </div> -->

  <div id="search-function">
    <form id="create-collection" ng-submit="submitCollection()">
      <h4>Start a Collection:</h4>
      <input class="form-control" type="text" placeholder="Collection Name" ng-model="collection">
      <input class="btn btn-default" type="submit" value="Submit" ng-click="showSearchInfo = false">
    </form>
    <div ng-hide="showSearchInfo">
      <form id="keyword-search" ng-submit="submit()" >
        <h4>Search by keyword:</h4>
        <input type="text" placeholder="Enter keywords" ng-model="keyword" class="form-control">
        <div id="mvc">
          <label><input type="checkbox" ng-model="checkboxModel.models" value="app/models"> Model</label>
          <label><input type="checkbox" ng-model="checkboxModel.views" value="app/views"> View</label>
          <label><input type="checkbox" ng-model="checkboxModel.controllers" value="app/controllers"> Controller</label>
          <input class="btn btn-default" type="submit" value="Submit">
        </div>
      </form>
    </div>
    <div ng-controller="mainController">
      <div ng-repeat ="searchCollection in searchResults">
        <div ng-repeat="searchResult in searchCollection">
          <div ng-if="searchResult.error">
            <p>{{searchResult.error}}</p>
          </div>
          <div ng-if="searchResult.url">
            <input type="hidden" ng-model="searchResult.url">
            <input type="hidden" ng-model="searchResult.raw_code">
            <input type="hidden" ng-model="searchResult.path">
            <p>{{searchResult.error}}</p>
            <p>Path: {{searchResult.path}}</p>
            <p>Url: {{searchResult.url}}</p>
              <span class="glyphicon glyphicon-ok" ng-show="clickedPlus"></span>
              <button class="glyphicon glyphicon-plus" ng-hide="clickedPlus" ng-click="saveLink(searchResult.url, searchResult.raw_code, searchResult.path); clickedPlus = !clickedPlus"></button>

            <pre class="codeDisplay"><code>
              <label>{{searchResult.raw_code}}</label>
            </code></pre>
          </div>
        </div>
      </div>
      <!-- ADD BUTTON TO CURRENT COLLECTION SHOW -->
    </div>
  </div>

<% else %>

<% end %>

</div>
